<!DOCTYPE html>
{% load static %}
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>에이전트 관리 - PRISM-AGI</title>
    <link rel="icon" type="image/png" href="{% static 'img/image_logo.png' %}">

    <link rel="stylesheet" href="{% static 'css/reset.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/chat.css' %}">
    <link rel="stylesheet" href="{% static 'css/manage-agents.css' %}">
</head>
<body class="manage-agents-page">
    {% csrf_token %}
    <div class="chat-layout">
        <!-- 좌측 사이드바 -->
        {% include 'partials/sidebar.html' %}
        
        <!-- 메인 에이전트 관리 영역 -->
        <div class="chat-main">
            <div class="agents-manager-container">
                <div class="manager-header">
                    <button class="back-button" id="backToChat">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 12H5l6-6V9l-7 7 7 7v-3l-6-6z"/>
                        </svg>
                        채팅으로 돌아가기
                    </button>
                    
                    <h1 class="manager-title">에이전트 관리</h1>
                    <p class="manager-subtitle">생성 에이전트 관리 및 설정</p>
                </div>

                <div class="manager-content">
                    <!-- 필터 및 검색 -->
                    <div class="agents-toolbar">
                        <div class="search-container">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                            <input type="text" id="searchAgent" placeholder="에이전트 검색..." class="search-input">
                        </div>
                        
                        <div class="filter-container">
                            <select id="languageFilter" class="filter-select">
                                <option value="">모든 언어</option>
                                <option value="python">Python</option>
                                <option value="javascript">JavaScript</option>
                                <option value="java">Java</option>
                                <option value="cpp">C++</option>
                                <option value="csharp">C#</option>
                                <option value="go">Go</option>
                                <option value="rust">Rust</option>
                            </select>
                            
                            <select id="statusFilter" class="filter-select">
                                <option value="">모든 상태</option>
                                <option value="active">활성</option>
                                <option value="inactive">비활성</option>
                                <option value="error">오류</option>
                            </select>
                        </div>
                        
                        <button class="btn btn-primary" id="createNewAgent">
                            새 에이전트 생성
                        </button>
                    </div>

                    <!-- 에이전트 목록 -->
                    <div class="agents-grid" id="agentsGrid">
                        <!-- 로딩 상태 -->
                        <div class="loading-container" id="loadingContainer">
                            <div class="loading-spinner"></div>
                            <p>에이전트 목록을 불러오는 중...</p>
                        </div>
                        
                        <!-- 에이전트 카드들이 여기에 동적으로 추가됩니다 -->
                    </div>

                    <!-- 빈 상태 -->
                    <div class="empty-state" id="emptyState" style="display: none;">
                        <svg width="80" height="80" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        <h3>생성된 에이전트가 없습니다</h3>
                        <p>첫 번째 에이전트를 생성해보세요!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 에이전트 상세 모달 -->
    <div class="modal" id="agentDetailModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>에이전트 상세 정보</h3>
                <button class="modal-close" id="closeDetailModal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body" id="agentDetailContent">
                <!-- 에이전트 상세 정보가 여기에 표시됩니다 -->
            </div>
        </div>
    </div>

    <!-- 에이전트 삭제 확인 모달 -->
    <div class="modal" id="deleteConfirmModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>에이전트 삭제</h3>
                <button class="modal-close" id="closeDeleteModal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p>정말로 이 에이전트를 삭제하시겠습니까?</p>
                <p class="warning-text">이 작업은 되돌릴 수 없습니다.</p>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="cancelDelete">취소</button>
                    <button class="btn btn-danger" id="confirmDelete">삭제</button>
                </div>
            </div>
        </div>
    </div>

    <script src="{% static 'js/activity-logger.js' %}"></script>
    <script src="{% static 'js/chat.js' %}"></script>
    <script src="{% static 'js/manage-agents.js' %}"></script>
</body>
</html>
