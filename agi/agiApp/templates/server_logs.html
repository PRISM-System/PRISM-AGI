<!DOCTYPE html>
{% load static %}
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>서버 로그 - PRISM-AGI</title>
    <link rel="icon" type="image/png" href="{% static 'img/image_logo.png' %}">

    <link rel="stylesheet" href="{% static 'css/reset.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/chat.css' %}">
    <link rel="stylesheet" href="{% static 'css/server-logs.css' %}">
</head>
<body class="server-logs-page">
    {% csrf_token %}
    <div class="chat-layout">
        <!-- 좌측 사이드바 -->
        {% include 'partials/sidebar.html' %}
        
        <!-- 메인 로그 영역 -->
        <div class="chat-main">
            <div class="logs-container">
                <div class="logs-header">
                    <h1 class="logs-title">서버 로그</h1>
                    <p class="logs-subtitle">서버 요청/응답 및 시스템 로그 기록</p>
                </div>

                <div class="logs-content">
                    <!-- 필터 및 제어 영역 -->
                    <div class="logs-toolbar">
                        <div class="toolbar-left">
                        
                        </div>
                        
                        <div class="toolbar-right">
                            <button class="action-button refresh-btn" id="refreshLogs">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                                </svg>
                                새로고침
                            </button>
                            <button class="action-button export-btn" id="exportLogs">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                </svg>
                                내보내기
                            </button>
                        </div>
                    </div>

                    <!-- 로그 테이블 -->
                    <div class="logs-table-container">
                        <div class="table-wrapper">
                            <div class="logs-list" id="logsList">
                                {% if logs %}
                                    {% for log in logs %}
                                        {% if log %}
                                        <div class="log-entry" data-log="{{ log }}">
                                            <div class="log-line">
                                                <span class="log-timestamp">{{ log|slice:":23" }}</span>
                                                <span class="log-level {% if 'ERROR' in log %}error{% elif 'WARNING' in log %}warning{% elif 'INFO' in log %}info{% elif 'DEBUG' in log %}debug{% else %}default{% endif %}">
                                                    {% if 'ERROR' in log %}ERROR
                                                    {% elif 'WARNING' in log %}WARNING
                                                    {% elif 'INFO' in log %}INFO
                                                    {% elif 'DEBUG' in log %}DEBUG
                                                    {% else %}LOG
                                                    {% endif %}
                                                </span>
                                                <span class="log-message">{{ log|slice:"24:" }}</span>
                                            </div>
                                        </div>
                                        {% else %}
                                        <div class="log-entry log-separator">
                                            <div class="log-line empty-line">
                                                <span class="log-spacer">...</span>
                                            </div>
                                        </div>
                                        {% endif %}
                                    {% endfor %}
                                {% else %}
                                    <div class="empty-state">
                                        <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                        </svg>
                                        <h3>로그가 없습니다</h3>
                                        <p>아직 기록된 서버 로그가 없습니다.</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{% static 'js/logout-handler.js' %}"></script>
    <script src="{% static 'js/server-logs.js' %}"></script>
    <script src="{% static 'js/chat.js' %}"></script>
</body>
</html>
