<!DOCTYPE html>
{% load static %}
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>규정 관리 - PRISM-AGI</title>
    <link rel="icon" type="image/png" href="{% static 'img/image_logo.png' %}">

    <link rel="stylesheet" href="{% static 'css/reset.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/chat.css' %}">
    <link rel="stylesheet" href="{% static 'css/manage-regulations.css' %}">
</head>
<body class="manage-regulations-page">
    {% csrf_token %}
    <div class="chat-layout">
        <!-- 좌측 사이드바 -->
        {% include 'partials/sidebar.html' %}
        
        <!-- 메인 규정 관리 영역 -->
        <div class="chat-main">
            <div class="regulations-manager-container">
                <div class="manager-header">
                    <button class="back-button" id="backToChat">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 12H5l6-6V9l-7 7 7 7v-3l-6-6z"/>
                        </svg>
                        채팅으로 돌아가기
                    </button>
                    
                    <h1 class="manager-title">규정 관리</h1>
                    <p class="manager-subtitle">기업 규정 및 정책 문서 관리</p>
                </div>

                <div class="manager-content">
                    <!-- 필터 및 검색 -->
                    <div class="regulations-toolbar">
                        <div class="search-container">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                            <input type="text" id="searchRegulation" placeholder="규정 검색..." class="search-input">
                        </div>
                        
                        <div class="filter-container">
                            <select id="categoryFilter" class="filter-select">
                                <option value="">모든 카테고리</option>
                                <option value="HR">인사 규정</option>
                                <option value="FINANCE">재무 규정</option>
                                <option value="SAFETY">안전 규정</option>
                                <option value="QUALITY">품질 규정</option>
                                <option value="SECURITY">보안 규정</option>
                                <option value="COMPLIANCE">컴플라이언스</option>
                                <option value="OPERATIONAL">운영 규정</option>
                            </select>
                            
                            <select id="statusFilter" class="filter-select">
                                <option value="">모든 상태</option>
                                <option value="ACTIVE">활성</option>
                                <option value="DRAFT">초안</option>
                                <option value="REVIEW">검토중</option>
                                <option value="ARCHIVED">보관</option>
                            </select>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn btn-primary" id="addRegulationBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                </svg>
                                새 규정 추가
                            </button>
                            <button class="btn btn-secondary" id="refreshRegulationsBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                                </svg>
                                새로고침
                            </button>
                        </div>
                    </div>

                    <!-- 규정 목록 -->
                    <div class="regulations-list-container">
                        <div class="regulations-stats">
                            <div class="stat-card">
                                <span class="stat-number" id="totalRegulations">0</span>
                                <span class="stat-label">총 규정</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-number" id="activeRegulations">0</span>
                                <span class="stat-label">활성 규정</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-number" id="draftRegulations">0</span>
                                <span class="stat-label">초안</span>
                            </div>
                        </div>

                        <div class="regulations-grid" id="regulationsGrid">
                            <!-- 로딩 상태 -->
                            <div class="loading-state" id="loadingState">
                                <div class="spinner"></div>
                                <span>규정 목록을 불러오는 중...</span>
                            </div>
                            
                            <!-- 빈 상태 -->
                            <div class="empty-state" id="emptyState" style="display: none;">
                                <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6H6zm7 1.5V8h5.5L13 3.5zM6 4h6v5a1 1 0 0 0 1 1h5v10a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4z"/>
                                </svg>
                                <h3>등록된 규정이 없습니다</h3>
                                <p>새 규정을 추가하여 시작하세요.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 규정 상세 모달 -->
    <div class="modal-overlay" id="regulationModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">규정 상세 정보</h3>
                <button class="modal-close" id="closeModal">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                    </svg>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="regulation-info-section">
                    <h4>기본 정보</h4>
                    <div class="info-row">
                        <span class="info-label">규정명:</span>
                        <span class="info-value" id="modalRegulationTitle">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">카테고리:</span>
                        <span class="info-value category-badge" id="modalRegulationCategory">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">상태:</span>
                        <span class="info-value status-badge" id="modalRegulationStatus">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">버전:</span>
                        <span class="info-value" id="modalRegulationVersion">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">최종 수정일:</span>
                        <span class="info-value" id="modalRegulationUpdated">-</span>
                    </div>
                </div>
                
                <div class="regulation-info-section">
                    <h4>설명</h4>
                    <div class="description-content" id="modalRegulationDescription">-</div>
                </div>
                
                <div class="regulation-info-section">
                    <h4>규정 내용</h4>
                    <div class="content-preview" id="modalRegulationContent">-</div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeModalBtn">닫기</button>
                <button class="btn btn-warning" id="editRegulationBtn">수정</button>
                <button class="btn btn-danger" id="deleteRegulationBtn">삭제</button>
                <button class="btn btn-primary" id="downloadRegulationBtn">다운로드</button>
            </div>
        </div>
    </div>

    <script src="{% static 'js/activity-logger.js' %}"></script>
    <script src="{% static 'js/manage-regulations.js' %}"></script>
    <script src="{% static 'js/chat.js' %}"></script>
</body>
</html>
